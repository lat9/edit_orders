<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Edit Orders</title>
<link rel="icon" href="../vinos_favicon.ico" type="image/x-icon" />
<link href="http://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
a, a:active, a:visited { color: #006666; text-decoration: underline; }
.tab a, .tab a:active, .tab a:visited { text-decoration: none; }
a:hover { color:#00CC99; text-decoration: underline; }
body, p, h1, h2, h3, h4, h5, h6, li, td, dd, img, dt, dl, table { font-family: Roboto, verdana, avantgarde, tahoma, arial, sans-serif; font-size: 12pt; color: black; padding: 0px; margin: 10px 20px; line-height: 1.75em; }
h1, h2, h3, h4 { font-weight: bold; padding: 5px; }
h1 { font-size: 20px; text-align: center; border-bottom: 1px solid #666; }
h2 { font-size: 16px; }
h2, h3 { border: 1px solid #666; background-color: #eee; }
h1+h3 { border: none; background-color: inherit; }
h5 { border-bottom: 1px dashed #666; padding-bottom: 5px; }
pre { font-size: 10pt; line-height: 1em; overflow: scroll; }
code.no-pad, pre.no-pad { padding: 0; margin: 0; }
.tableHead { background-color: #eee; }
ol li, ol li p { margin-left: 0; }
img { margin: 0 20px 10px; float: left; border: 1px solid #666; }
img.wide { width: 95%; float: none; margin: 0 2.5%; }
table, td, th { border: 1px solid black; border-collapse: collapse; }
td, th { padding: 5px; }
th { text-align: left; }
span.title { font-style: italic; font-weight: bold; color: #006666; }
.corefile, .red, .edit { color: red; }
.bold-red { color: red; font-weight: bold; }
.template { color: green; }
.added { color: blue; }
.removed { text-decoration: line-through; }
.osh { color: blue; }
.minspacing li { margin: 0; }
.smallimg { float: left; width: auto; margin: 0.5% 0.25% 0.25% auto; }
.forward { float: right; }
ol li, ul li { margin-top: 5px; margin-bottom: 5px; }
ul li ul { padding-left: 0; }
dt { font-weight: bold; margin-bottom: 0; }
dd { margin-top: 0; padding-left: 40px; }
.table { display: table; padding-left: 0.5%; font-size: smaller; }
.head_outer, .item_outer { display: table-row; }
.thead, .item { display: table-cell; padding: 0.25% 0.25%;}
.thead { font-weight: bold; }
.table ul { list-style-type: none; padding-left: 0; margin: 0; }
.table ul li { margin: 0; }
.c1 { text-align: center; font-weight: bold; width: 15%; color: #333333; vertical-align: top; }
.c3 { vertical-align: top; }
.clearBoth { clear: both; }
.smaller { font-size: smaller; }
.e { background-color: #eee; }
ul.simple, ul.simple li { list-style-type: none; padding: 0 0 0 0.5em; margin: 0; }
#table-config-osm tr td:first-child, #table-config-osm tr th:first-child { width: 30em; }
#overview-images { margin-right: 0.5em; }
.back { float: left; }
#fdcv ol { margin: 0; }
.nowrap { white-space: nowrap; }
.h-name { font-style: italic; font-weight: bold; }
#t-handlers td, #t-handlers th { vertical-align: top; }
div.totals-desc h4 { border-top: 1px solid #666; }

.etabs { margin: 0; padding: 0; }
.tab { display: inline-block; zoom:1; *display:inline; background: #eee; border: solid 1px #999; border-bottom: none; border-radius: 4px 4px 0 0; margin: 0; }
.tab a { font-size: 14px; line-height: 2em; display: block; padding: 0 10px; outline: none; }
.tab a:hover { text-decoration: underline; }
.tab.active { background: #fff; padding-top: 6px; position: relative; top: 1px; border-color: #666; }
.tab a.active { font-weight: bold; }
.tab-container .panel-container { background: #fff; border: solid #666 1px; padding: 10px; border-radius: 0 4px 4px 4px; }
.panel-container { margin-bottom: 10px; }

#dbio_layout { text-align: center; float: right; background-color: #ebebeb; }
#dbio_layout2 { padding: 0; }
#dbio_layout2 table, #dbio_layout2 td { margin: 0; border: none; }
#dbio_layout2 tr:first-child td { border-bottom: 1px solid black; }
-->
</style>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> 
<script src="../jquery.easytabs.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready( function() {
        $('#tab-container').easytabs();
    });
</script>
</head>

<body>
  <h1 id="title">Edit Orders for Zen Cart&reg;</h1>
  <p>Version 4.5.0.  Copyright &copy; 2015-2019, <a href="https://vinosdefrutastropicales.com" target="_blank">Vinos de Frutas Tropicales</a>.</p>
  <p>Current Support Thread on the Zen Cart forums: <a href="https://www.zen-cart.com/showthread.php?200407" target="_blank">https://www.zen-cart.com/showthread.php?200407</a></p>
  <p>Released under the General Public License (see the file named <code class="no-pad">LICENSE</code> in the plugin's distribution for full details). This script is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
  
  <p><strong>Usage Notes:</strong></p>
  <ol>
    <li>A working copy of Zen Cart (v1.5.5a or later) is required by Edit Orders.</li>
    <li>Some <code class="no-pad">order-total</code> modules are incompatibile with <em>EO</em>, especially if they require storefront conditions to perform their processing.</li>
    <li>Products added to an order via <em>EO</em> cannot include a &quot;file-upload&quot; option as that option-type is not currently supported.</li>
  </ol>
  
  <div class="tab-container" id="outer-container">
    <ul class="etabs">
      <li class="tab"><a href="#overview">Overview</a></li>
      <li class="tab"><a href="#installation">Installation</a></li>
      <li class="tab"><a href="#customization">Using Edit Orders</a></li>
      <li class="tab"><a href="#interactions">Interaction with Other Modules</a></li>
      <li class="tab"><a href="#history">Change History</a></li>
    </ul>
    
    <div class="panel-container">
  
      <!-- start overview section -->
      <div id="overview">
        <noscript><h2>Overview</h2></noscript>
        <p><em>Edit Orders (EO)</em> is a Zen Cart admin module that allows administrative users to edit a customer's order to:</p>
        <ul>
          <li>Change the customer, billing or shipping information</li>
          <li>Add, delete, and edit products in an order</li>
          <li>Update product quantities and pricing</li>
          <li>Modify product attributes</li>
          <li>Add, delete, and edit order totals</li>
        </ul>       
      </div>
      <!-- end overview section -->
    
      <!-- start installation section -->
      <div id="installation">
        <noscript><h2>Installing, Upgrading or Uninstalling</h2></noscript>
        <div class="tab-container" id="inner-container1">
          
          <p>This section identifies the processes you'll use to initially install <em>Edit Orders</em>, upgrade or uninstall <em>EO</em> entirely.</p>
          <p><i class="fas fa-exclamation-circle fa-5x red"></i><strong class="red">Notes:</strong></p>
          <ol>
            <li>Before you install <em>EO</em> v4.2.0 (or later), you'll need a working copy of Zen Cart 1.5.5a or later.</li>
            <li><em>EO</em>, v4.4.0 and later, requires that the base Zen Cart function <code>zen_add_tax</code> (present in /YOUR_ADMIN/includes/functions/general.php) <b>not</b> pre-round its return value.  Refer to <a href="#zat" class="side-link">this</a> tab for more information.</li>
            <li>Edit Orders provides an additional admin-sanitization script so that its inputs don't get over-sanitized by the zc155+ sanitizer. This, unfortunately, affects stores that have both EO installed and a cron-job set up to run the <code>/admin/currency_cron.php</code> script; see <a href="https://github.com/zencart/zencart/issues/2849" target="_blank">this</a> Zen Cart issue for details.</li>
          </ol>
          
          <ul class="etabs">
            <li class="tab"><a href="#initial">Install/Upgrade</a></li>
            <li class="tab"><a href="#uninstall">Uninstalling</a></li>
            <li class="tab"><a href="#upgrade">Upgrading from EO v4.1.x</a></li>
            <li class="tab"><a href="#notifiers">Required Notifiers</a></li>
            <li class="tab"><a href="#zat">Changes to <code>zen_add_tax</code></a></li>
          </ul>

          <div class="panel-container">

            <div id="initial">
              <noscript><h3>Initial Installation</h3></noscript>
              <p>If your store uses a version of Zen Cart <em>prior to</em> 1.5.6, there are <span class="corefile">core-file overwrites</span> required by this plugin; you should <strong>always</strong> backup your cart's database and files prior to making any changes. Unzip the plugin's package file and then:</p>
              <ol type="A">
                <li>Rename the YOUR_ADMIN sub-directory to match your custom admin sub-directory's name.</li>
                <li>If your store uses a version of Zen Cart <em>prior to</em> 1.5.6, you'll need to merge any pre-existing <span class="corefile">core-file</span> changes with the changes required by <em>Edit Orders</em>.  Each of these files is located in the <code>zc155</code> of <em>EO</em>'s distribution, providing the in-core zc156 notifications required:<ol>
                  <li><span class="corefile">/includes/classes/order.php</span> <span class="smaller">(2 marked change-sections)</span></li>
                  <li><span class="corefile">/includes/modules/order_total/ot_shipping.php</span> <span class="smaller">(This is the zc156b version of the file)</span></li>
                  <li><span class="corefile">/YOUR_ADMIN/orders.php</span> <span class="smaller">(3 marked change-sections)</span></li>
                </ol>After you've merged your pre-existing changes into the files, copy them to your store's file-system (renaming the <code>YOUR_ADMIN</code> sub-directory to match your store's admin-directory name).</li>
                <li>Sign into your Zen Cart's admin panel.</li>
                <li>Copy the plugin's files to your store's directory structure:<ol>
                  <li>/includes/auto_loaders/config.vinos_common.php</li>
                  <li>/includes/classes/VinosAutoload.php <span class="smaller">(Added in v4.2.0)</span></li>
                  <li>/includes/classes/vinos/common/NotiferCheck.php <span class="smaller">(Added in v4.2.0)</span></li>
                  <li>/includes/init_includes/init_vinos_autoload.php <span class="smaller">(Added in v4.2.0)</span></li>
                  <li>/includes/languages/english/modules/order_total/ot_onetime_discount.php</li>
                  <li>/includes/languages/english/modules/order_total/ot_misc_cost.php</li>
                  <li>/includes/modules/order_total/ot_onetime_discount.php</li>
                  <li>/includes/modules/order_total/ot_misc_cost.php</li>
                  <li>/YOUR_ADMIN/edit_orders.php</li>
                  <li>/YOUR_ADMIN/images/icon_billing.png</li>
                  <li>/YOUR_ADMIN/images/icon_comment_add.png</li>
                  <li>/YOUR_ADMIN/images/icon_customers.png</li>
                  <li>/YOUR_ADMIN/images/icon_details.gif</li>
                  <li>/YOUR_ADMIN/images/icon_shipping.png</li>
                  <li>/YOUR_ADMIN/images/icon_track_add.png</li>
                  <li>/YOUR_ADMIN/includes/edit_orders.css</li>
                  <li>/YOUR_ADMIN/includes/auto_loaders/config.eo.php</li>
                  <li>/YOUR_ADMIN/includes/auto_loaders/config.vinos_common_admin.php <span class="smaller">(Added in v4.2.0)</span></li>
                  <li>/YOUR_ADMIN/includes/classes/attributes.php</li>
                  <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
                  <li>/YOUR_ADMIN/includes/classes/EditOrdersQueryCache.php</li>
                  <li>/YOUR_ADMIN/includes/classes/mock_cart.php</li>
                  <li>/YOUR_ADMIN/includes/classes/EditOrdersAdminObserver.php <span class="smaller">(Added in v4.2.0)</span></li>
                  <li>/YOUR_ADMIN/includes/extra_configures/edit_orders.php <span class="smaller">(Non-processing module, can be safely removed)</span></li>
                  <li>/YOUR_ADMIN/includes/extra_datafiles/edit_orders_defines.php</li>
                  <li>/YOUR_ADMIN/includes/extra_datafiles/eo_sanitization.php</li>
                  <li>/YOUR_ADMIN/includes/functions/extra_functions/common_orders_functions.php <span class="smaller">(Non-processing module, can be safely removed)</span></li>
                  <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
                  <li>/YOUR_ADMIN/includesinit_includes/init_eo_config.php</li>
                  <li>/YOUR_ADMIN/includes/languages/english/edit_orders.php</li>
                  <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/edit_orders.php</li>
                  <li>/YOUR_ADMIN/includes/languages/english/images/buttons/button_add_product.gif</li>
                </ol></li>
                <li>Click the &quot;Admin Home&quot; link in your Zen Cart's top admin menu.  This action will cause the plugin's installation script to run.</li>
              </ol>
            </div>
            
            <div id="uninstall">
              <noscript><h3>Uninstalling</h3></noscript>
              <p>First, delete the files that were copied to your Zen Cart's file-system, then copy the contents of the plugin's <code>/docs/edit_orders/uninstall/uninstall_eo.sql</code> to your clipboard and paste into your admin's <em>Tools-&gt;Install SQL Patches</em> to complete the uninstall process.</p>
            </div>
            
            <div id="upgrade">
              <noscript><h3>Upgrading from EO v4.1.x</h3></noscript>
              <p>The installation for <em>Edit Orders</em> changed drastically for v4.2.0 and later.  Following is a &quot;secret decoder ring&quot; to let you where files from those earlier releases have been moved (or removed) in the v4.2.0 or later distributions of <em>EO</em>:</p>
              <table>
                <tr>
                  <th><em>EO</em> v4.1.7 or earlier</th>
                  <th><em>EO</em> v4.2.0 or later</th>
                </tr>
                <tr><td>/1_modified_core_files/includes/classes/order.php</td><td>/includes/classes/order.php</td></tr>
                <tr><td>/1_modified_core_files/includes/classes/order_total.php</td><td>&mdash;</td></tr>
                <tr><td>/1_modified_core_files/includes/classes/shipping.php</td><td>&mdash;</td></tr>
                <tr><td>/1_modified_core_files/your_admin_folder/orders.php</td><td>/YOUR_ADMIN/orders.php</td></tr>
                <tr><td>/1_modified_core_files/your_admin_folder/images/icon_edit.gif</td><td>&mdash;</td></tr>
                <tr><td>/1_modified_core_files/your_admin_folder/includes/languages/english/orders.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/edit_orders.php</td><td>/YOUR_ADMIN/edit_orders.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_billing.png</td><td>/YOUR_ADMIN/images/icon_billing.png</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_comment_add.png</td><td>/YOUR_ADMIN/images/icon_comment_add.png</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icons/icon_customers.png</td><td>/YOUR_ADMIN/images/icon_customers.png</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_details.gif</td><td>/YOUR_ADMIN/images/icon_details.gif</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_invoice.gif</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_shipping.png</td><td>/YOUR_ADMIN/images/icon_shipping.png</td></tr>
                <tr><td>/2_new_files/your_admin_folder/images/icon_track_add.png</td><td>/YOUR_ADMIN/images/icon_track_add.png</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/edit_orders.css</td><td>/YOUR_ADMIN/includes/edit_orders.css</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/auto_loaders/config.eo.php</td><td>/YOUR_ADMIN/includes/auto_loaders/config.eo.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/auto_loaders/config.zc154_compatibility.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/attributes.php</td><td>/YOUR_ADMIN/includes/classes/attributes.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/editOrders.php</td><td>/YOUR_ADMIN/includes/classes/editOrders.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/EditOrdersQueryCache.php</td><td>/YOUR_ADMIN/includes/classes/EditOrdersQueryCache.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/eo_plugin.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/mock_cart.php</td><td>/YOUR_ADMIN/includes/classes/mock_cart.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/classes/plugin.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/extra_configures/edit_orders.php</td><td>/YOUR_ADMIN/includes/extra_configures/edit_orders.php <span class="smaller">(Placeholder, can be removed)</span></td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/extra_datafiles/edit_orders_defines.php <span class="smaller">(Placeholder, can be removed)</span></td><td>/YOUR_ADMIN/includes/extra_datafiles/edit_orders_defines.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/extra_datafiles/eo_sanitization.php</td><td>/YOUR_ADMIN/includes/extra_datafiles/eo_sanitization.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/functions/extra_functions/common_orders_functions.php <span class="smaller">(Placeholder, can be removed)</span></td><td>/YOUR_ADMIN/includes/functions/extra_functions/common_orders_functions.php <span class="smaller">(Placeholder, can be removed)</span></td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/functions/extra_functions/edit_orders_functions.php</td><td>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/init_includes/init_eo_config.php</td><td>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/init_includes/init_zc154_compatibility.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/languages/english/edit_orders.php</td><td>/YOUR_ADMIN/includes/languages/english/edit_orders.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/languages/english/extra_definitions/edit_orders.php</td><td>/YOUR_ADMIN/includes/languages/english/extra_definitions/edit_orders.php</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/languages/english/images/buttons/button_add_product.gif</td><td>/YOUR_ADMIN/includes/languages/english/images/buttons/button_add_product.gif</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/languages/english/modules/plugin/eo.php</td><td>&mdash;</td></tr>
                <tr><td>/2_new_files/your_admin_folder/includes/languages/english/modules/plugin/plugin.php</td><td>&mdash;</td></tr>
                <tr><td>/3_install/your_admin_folder/includes/auto_loaders/config.eo_onetime.php</td><td>&mdash;</td></tr>
                <tr><td>/3_install/your_admin_folder/includes/init_includes/init_eo_install.php</td><td>&mdash;</td></tr>
                <tr><td>/4_optional_items/1_onetime_discount/1_new_files/includes/languages/english/modules/order_total/ot_onetime_discount.php</td><td>/includes/languages/english/modules/order_total/ot_onetime_discount.php</td></tr>
                <tr><td>/4_optional_items/1_onetime_discount/1_new_files/includes/modules/order_total/ot_onetime_discount.php</td><td>/includes/modules/order_total/ot_onetime_discount.php</td></tr>
                <tr><td>/4_optional_items/1_onetime_discount/1_new_files/includes/languages/english/modules/order_total/ot_misc_cost.php</td><td>/includes/languages/english/modules/order_total/ot_misc_cost.php</td></tr>
                <tr><td>/4_optional_items/1_onetime_discount/1_new_files/includes/modules/order_total/ot_misc_cost.php</td><td>/includes/modules/order_total/ot_misc_cost.php</td></tr>
              </table>
            </div>
            
            <div id="notifiers">
              <noscript><h3>Required Notifiers</h3></noscript>
              <p>Part of the simplification of the <em>EO</em> installation process is to lessen the <span class="corefile">core-file</span> changes required.  Zen Cart 1.5.5a has been updated to include additional notifiers within the admin's <em>Customers-&gt;Orders</em> processing and Zen Cart 1.5.6 (and later) expands on that update.  <em>EO</em> now makes use of those notifications to add its buttons and icons to that tool.</p>
              <p>The possibility does exist, however, that these required notifiers didn't get included when a store's Zen Cart installation was upgraded from a prior version.  The following table lists the notifiers that allow <em>EO</em> to perform its processing.</p>
              <table>
                <tr>
                  <th>Module Name</th>
                  <th>Notifier &quot;Key&quot;</th>
                  <th>Comments</th>
                </tr>
                <tr>
                  <td>/YOUR_ADMIN/orders.php</td>
                  <td>NOTIFY_ADMIN_ORDERS_MENU_BUTTONS</td>
                  <td>Built-in, issued during the orders-listing display, after creating the upper button-group for the selected order in the sidebar.</td> 
                </tr>
                <tr>
                  <td>/YOUR_ADMIN/orders.php</td>
                  <td>NOTIFY_ADMIN_ORDERS_MENU_BUTTONS_END</td>
                  <td>Built-in, issued during the orders-listing display, after creating the lower button-group for the selected order in the sidebar.</td>
                </tr>
                <tr>
                  <td>/YOUR_ADMIN/orders.php</td>
                  <td>NOTIFY_ADMIN_ORDERS_SHOW_ORDER_DIFFERENCE</td>
                  <td><span class="added">Added</span>, issued during the orders-listing display, enabling additional icons to be associated with each order's line-item when creating the bottom button-group.  This notifier is based on the like-named one in the Zen Cart 1.5.6+ repository.</td>
                </tr>
                <tr>
                  <td>/YOUR_ADMIN/orders.php</td>
                  <td>NOTIFY_ADMIN_ORDERS_EDIT_BUTTONS</td>
                  <td><span class="added">Added</span>, issued during an order's detailed view when creating the bottom button-group.  This notifier is based on the like-named one in the Zen Cart 1.5.6+ repository.</td>
                </tr>
                <tr>
                  <td>/includes/modules/order_total/ot_shipping.php</td>
                  <td>NOTIFY_OT_SHIPPING_TAX_CALCS</td>
                  <td>Issued during an order's &quot;order-totals&quot; processing, allowing the order's shipping tax-rate and tax-description to be overridden.  See <a href="https://github.com/zencart/zencart/commit/d0e663df3558d73475d99dcc2770038221ad70b6#diff-0995b79fef2e5ca29956202233852b76" target="_blank">this</a> Zen Cart commit for zc156 for details.  If your store runs on a zc155 variant, you can safely copy the entire zc156 module for use while you plan your store's zc156 upgrade!</td>
                </tr>
              </table>
            </div>
            
            <div id="zat">
              <noscript><h3>Changes to <code>zen_add_tax</code></h3></noscript>
              <p>The base Zen Cart admin version of the <code>zen_add_tax</code> function, present in <code>/YOUR_ADMIN/includes/functions/general.php</code>, currently pre-rounds its returned result &hellip; unlike the storefront version.  Starting with <em>EO</em> v4.4.0, this condition must be corrected before you can use <b>Edit Orders</b>; you'll see the following message displayed in your admin's header if the condition exists.</p>
              <img src="zen_add_tax_msg.jpg" alt="EO Message" /><br class="clearBoth" />
              <p>To correct the issue, you'll need to edit that function, changing:</p>
              <pre>
/**
 * Add tax to a products price
 */
  function zen_add_tax($price, $tax) {
    global $currencies;

    if (DISPLAY_PRICE_WITH_TAX_ADMIN == 'true') {
      return zen_round($price, $currencies->currencies[DEFAULT_CURRENCY]['decimal_places']) + zen_calculate_tax($price, $tax);
    } else {
      return zen_round($price, $currencies->currencies[DEFAULT_CURRENCY]['decimal_places']);
    }
  }
              </pre>
              <p>&hellip; to &hellip;</p>
              <pre>
/**
 * Add tax to a products price
 */
  function zen_add_tax($price, $tax) {
    global $currencies;

    if (DISPLAY_PRICE_WITH_TAX_ADMIN == 'true') {
<span class="edit">//-bof-edit_orders-lat9: Don't pre-round values, aligning with storefront
//</span>      return zen_round($price, $currencies->currencies[DEFAULT_CURRENCY]['decimal_places']) + zen_calculate_tax($price, $tax);
<span class="edit">      return $price + zen_calculate_tax($price, $tax);</span>
    } else {
<span class="edit">//</span>      return zen_round($price, $currencies->currencies[DEFAULT_CURRENCY]['decimal_places']);
      <span class="edit">return $price;</span>
    }
<span class="edit">//-eof-edit_orders-lat9</span>
  }
              </pre>
            </div>
            
          </div>
        </div>
       </div>
       <!-- end installation section -->
       
      <!-- start customization section -->
      <div id="customization">
        <noscript><h2>Using <em>Edit Orders</em></h2></noscript>
        <p><em>Edit Orders</em> is easy to use; the interface looks similar to the <em>Customers-&gt;Orders</em> processing that is built into Zen Cart.  Once the plugin is installed, navigate to <em>Customers-&gt;Orders</em> and click the &quot;edit&quot; button to view the editable details of the order.</p>
        <p>Starting with v4.3.0 of <em>EO</em>, a checkbox input (&quot;Reset totals prior to update?&quot;) appears next to the upper <b>update</b> button.  Its default value is controlled by <em>Configuration-&gt;Edit Orders-&gt;Reset Totals on Update &mdash; Default</em>.  If an order includes order-total modules (like <em>Group Pricing</em>) that affect both the order's total and tax values, you might need to tick that box to have <em>EO</em> correctly calculate any updated order.</p>
        <p><strong>Note:</strong> We do not recommend clicking &quot;edit&quot; on completed orders. When you edit an order, <b>all</b> order-totals are recalculated including tax, sub-total and total. Editing a completed order may result in undesired changes!</p>
        <div class="tab-container" id="inner-container2">
          <ul class="etabs">
            <li class="tab"><a href="#addresses">Change an Address</a></li>
            <li class="tab"><a href="#add-product">Add a Product</a></li>
            <li class="tab"><a href="#update-product">Update Product(s)</a></li>
            <li class="tab"><a href="#change-totals">Change Order-Totals</a></li>
            <li class="tab"><a href="#change-status">Change Status</a></li>
          </ul>
          
          <div class="panel-container">
            <div id="addresses">
              <noscript><h3>Change an Address</h3></noscript>
              <img class="forward" src="zc-edit-order-address.png" alt="Edit Order customer and address" />
              <p>Once you've opened an order for editing, you can edit the customer, billing and/or shipping addresses as needed:</p>
              <ol>
                <li>You must enter a valid country name (and state) registered in the store's Zen Cart database. Failure to do so may result in incorrect calculation of taxes and order totals, warnings in the Zen Cart debug logs or potentially more serious errors resulting in the display of a &quot;blank page&quot; or the inability to correctly load or edit the order.</li>
                <li>Edit the phone number associated with the order as needed.</li>
                <li>Edit the payment method as needed.  If you edit the &quot;CC number&quot; associated with the order, <em>EO</em> will sanitize that value in the database, removing portions of the value for PCI compliance.</li>
                <li>To save the changes, click the &quot;update&quot; button.</li>
              </ol>
              <div class="clearBoth"></div>
            </div>
            
            <div id="add-product">
              <noscript><h3>Add a Product</h3></noscript>
              <img class="forward" src="zc-edit-order-add-product.png" alt="Edit Order add product" />
              <p>To add a product to the order, start by clicking the &quot;Add Products&quot; button near the center of the page and</p>
              <ol>
                <li>Narrow down the list of products by either selecting a category from the list or entering a search term and pressing the &quot;enter&quot; key on your keyboard.</li>
                <li>Choose a product from the list.</li>
                <li>Choose any product options / attributes as needed.</li>
                <li>Select quantity and pricing options.<ol type="a">
                  <li>Enter the desired quantity. This field will be subject to the product's min / max configured settings. Inventory numbers will be adjusted for the selected product in the database.</li>
                  <li>Choose whether to use any configured store specials or sales price for the product or to only use the full product price.</li>
                </ol></li>
              </ol>
              <p>Once you've made your selections, click the &quot;Add now&quot; button.</p>
              <div class="clearBoth"></div>
            </div>
            
            <div id="update-product">
              <noscript><h3>Update Product(s)</h3></noscript>
              <img class="forward" src="zc-edit-order-update-product.png" alt="Edit Order update product"/>
              <p>You can update (edit) each product's quantity, name, model, price, one-time charges, tax-rate and product options.  When you're finished, click the &quot;update&quot; button to save your changes.</p>
              <div class="clearBoth"></div>
            </div>
            
            <div id="change-totals">
              <noscript><h3>Change Order-Totals</h3></noscript>
              <img class="forward" src="zc-edit-order-change-order-total.png" alt="Edit Order change order totals" />
              <p>Price calculations for order-totals are processed by the order-total modules directly and not <em>Edit Orders</em>. This helps prevent math errors and ensure consistency. Not all 3rd party order-total modules were written with the capability to be loaded and run against an order from the Zen Cart admin interface.</p>
              <p>Many of the common order-total modules are automatically calculated for the order based upon store settings and information present in the order. Automatically calculated order-totals such as ot_tax, ot_loworderfee, ot_subtotal and ot_total <b><i>cannot be edited or removed</i></b> from an order.</p>

              <div class="totals-desc">
                <h4>Add an Order-Total</h4>
                <p>To add an order-total to the active order's calculations:</p>
                <ol>
                  <li>Select the order-total module to be added; if you select <code class="no-pad">shipping</code>, you need to also choose a specific shipping-module name.</li>
                  <li>Enter the textual name that is displayed to the customer (and admins) when viewing the to-be-updated order &mdash; note that some order-total modules will automatically change this name!</li>
                  <li>Add the desired order-total cost.  Note that while <em>Gift Certificates and Vouchers</em> costs can be entered as either a positive or negative value, the value is displayed as a negative number after the order is updated.</li>
                  <li>Click the &quot;update&quot; button to save the changes.</li>
                </ol>
              </div>

              <div class="totals-desc">
                <h4>Remove an Order-Total</h4>
                <p>To remove an order-total from the active order's calculations:</p>
                <ol>
                  <li>Clear the order-total &quot;name&quot; and cost fields.</li>
                  <li>Click the &quot;update&quot; button to save the changes.</li>
                </ol>
              </div>

              <div class="totals-desc">
                <h4>Update an Order-Total</h4>
                <p>To update an order-total for the active order's calculations:</p>
                <ol>
                  <li>If you are editing the <em>Shipping</em> order-total (ot_shipping), you can change the shipping-module by selecting the desired module from the drop-down list.</li>
                  <li>Update the order-total's name as displayed to the customer, noting that some order-total modules automatically update the name.</li>
                  <li>Update the order-total's cost to reflect the desired amount.</li>
                  <li>Click the &quot;update&quot; button to save the changes.</li>
                </ol>
                <p><strong>Note:</strong> Prices are displayed with or without tax based upon the <em>storefront</em> settings not the admin settings, in an attempt to emulate the environment in which the order-totals are calculated. Most of the order-total modules are designed to run from the storefront only.  Refer to the Zen Cart configuration setting <code class="no-pad">DISPLAY_PRICE_WITH_TAX</code>.</p>
              </div>
              
            </div>

            <div id="change-status">
              <noscript><h3>Change Status</h3></noscript>
              <p>To change an order's status and/or add a comment to the order, follow the procedure you use within the built-in <em>Customers-&gt;Orders</em> processing and click the &quot;update&quot; button to apply the changes to the order.</p>
            </div> 

          </div>
        </div>
      </div>
      <!-- end customization section -->
      
      <!-- start interactions section -->
      <div id="interactions">
        <noscript><h2>Integration With Other Modules</h2></noscript>
        <p>The following is a list of some commonly installed 3rd party Zen Cart modules (plugins) known to be compatible with Edit Orders. The list is mainly confined to 3rd party plugins which also affect customer orders or placing customer orders. Please refer to the appropriate module for further notes and instructions (if any).</p>
        <p>Order-total modules are used to change the total cost of an order. <em>Edit Orders</em> uses the same order-total modules as the storefront checkout process. Most of the order-total modules which ship with Zen Cart have been validated and work as expected (ot_coupon, ot_gv, ot_loworderfee, ot_shipping, ot_subtotal, ot_tax and ot_total). Both <code class="no-pad">ot_subtotal</code> and <code class="no-pad">ot_total</code> must be enabled for <em>Edit Orders</em> to function correctly.</p>
        </ol>
        <div class="tab-container" id="inner-container2">
          <ul class="etabs">
            <li class="tab"><a href="#attributes">Attributes</a></li>
            <li class="tab"><a href="#local-sales">Local Sales Tax</a></li>
            <li class="tab"><a href="#other-modules">Other Modules (Troubleshooting)</a></li>
          </ul>
          
          <div class="panel-container">
           
            <div id="attributes">
              <noscript><h3>Attributes</h3></noscript>
              <p>If your store includes products with attributes and your want EO to display your products' attributes <em>in the same order</em> as the storefront operation, you'll need to make a change to <code>/includes/modules/attributes.php</code>.  See <a href="https://www.zen-cart.com/showthread.php?222184-Product-attribute-sorting" target="_blank">this</a> Zen Cart posting for additional information.</p>
              <ol>
                <li>If you don't already have a template-override version of the file, make one by copying /includes/modules/attributes.php to /includes/modules/YOUR_TEMPLATE/attributes.php.</li>
                <li>Locate the following section (towards the top of the file):<pre>
                    if (PRODUCTS_OPTIONS_SORT_ORDER=='0') {
                      $options_order_by= ' order by LPAD(popt.products_options_sort_order,11,"0")';
                    } else {
                      $options_order_by= ' order by popt.products_options_name';
                    }
                </pre></li>
                <li>Change the line indicated:<pre>
                    if (PRODUCTS_OPTIONS_SORT_ORDER=='0') {
                      $options_order_by= ' order by LPAD(popt.products_options_sort_order,11,"0")<span class="bold-red">, popt.products_options_name</span>';
                    } else {
                      $options_order_by= ' order by popt.products_options_name';
                    }
                </pre></li>
            </div>
                        
            <div id="local-sales">
              <noscript><h3>Local Sales Tax</h3></noscript>
              <p><em>Edit Orders</em> has been validated with <em>Local Sales Tax</em> v2.3.5 or newer installed; previous versions are not supported.  To integrate the two plugins, you'll need to copy the file <code class="no-pad">/includes/functions/extra_functions/functions_local_sales_taxes.php</code> to <code class="no-pad">/YOUR_ADMIN/includes/functions/extra_functions/functions_local_sales_taxes.php</code> for that order-total module to &quot;find&quot; the functions it needs!</p>
              <p><strong>Note:</strong> The tax rate shown next to individual products reflects <em>only</em> the Zen Cart configured tax rate. It does not include any tax rates defined by <em>Local Sales Tax</em>. The sales tax rate cannot be adjusted by <em>Edit Orders</em> for the Local Sales Taxes module.</p>
            </div>
            
            <div id="other-modules">
              <noscript><h3>Other Modules (Troubleshooting)</h3></noscript>
              <p>Because <em>Edit Orders</em> loads the same order-total modules as the storefront checkout process, all enabled modules must be able to be loaded and processed from the store's Zen Cart admin-console. Because Zen Cart traditionally does not use those modules during admin-level processing, many 3rd-party order-total modules were designed without the authors taking this into consideration.</p>
              <p>The most common symptom caused by a problematic order-total module (when editing an order) is the presentation of a &quot;blank&quot; page when adding a product to (or updating) the order. In most cases taking a look at the generated <a href="http://www.zen-cart.com/content.php?124" target="_blank">debug log</a> provides valuable insight as to how to correct the underlying issue. Another option is to disable all add-on order-total modules and then enable them one-by-one to determine which order-total module is causing the blank page.</p>
              <p>Here are some common causes of issues with 3rd-party order-total modules and possible corrective actions:</p>
              <ol>
                <li>The order-total's installation includes additional storefront functions.<ul>
                  <li>Copy the order-total's function file(s) to your store's <code class="no-pad">/YOUR_ADMIN/includes/functions/extra_functions</code> directory.</li>
                </ul></li>
              </li>
              <li>The order-total inspects the values in <code class="no-pad">$_SESSION['cart']</code> instead of those present in the <code class="no-pad">$order</code> object to determine the associated value to display.<ul>
                <li>Update the module to check and use the <code class="no-pad">$order</code> object.</li>
              </ul></li>
            </div>

          </div>
        </div>
      </div>
      <!-- end interactions section -->
      
      <!-- start history section -->
      <div id="history">
        <noscript><h3>Version History</h3></noscript>
        <p>You can view the details of these changes on the plugin's <a href="https://github.com/lat9/edit_orders/issues" target="_blank">GitHub repository.</a></p>
        <ul>
          <li>v4.5.0, 2019-12-02 (lat9)<ul>
            <li>BUGFIX: Correct PHP notices when an order has no 'tax_groups'.</li>
            <li>BUGFIX: Selected attribute-value not displayed on order's initial display.</li>
            <li>BUGFIX: Incorrect constant name used for Ty Package Tracker link.</li>
            <li>BUGFIX: Correct 'Add Product' PHP notices, missing numeric fields' override variables.</li>
            <li>CHANGE: Enable a store to configure the display-order for the order's addresses.</li>
            <li>BUGFIX: Incorrect detection of additional order-status-history fields.</li>
            <li>The following files were changed or <span class="added">added</span>:<ol>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
              <li><span class="added">/YOUR_ADMIN/includes/modules/edit_orders/eo_addresses_cbs.php</span></li>
              <li><span class="added">/YOUR_ADMIN/includes/modules/edit_orders/eo_addresses_csb.php</span></li>
            </ol></li>
          </ul></li>
          <li>v4.4.3, 2019-10-05 (lat9)<ul>
            <li>BUGFIX: Correct variable-name identifying product to use for attribute-pricing.</li>
            <li>BUGFIX: Correct PHP notices when updating an order's totals.</li>
            <li>BUGFIX: Correct empty order rendered if observer disallows the order's update.</li>
            <li>BUGFIX: Correct PHP notice, adding the 'Edit' button to the Customers::Orders display.</li>
            <li>CHANGE: zc157 future-proofing; change to <code>zen_draw_input_field</code>.</li>
            <li>CHANGE: zc157 future-proofing; Multi-lingual countries.</li>
            <li>BUGFIX: Correct PHP notice during 'EDIT_ORDERS_DISPLAY_ONLY_TOTALS' notification processing.</li>
            <li>CHANGE: zc156+, restore the order's shipping-address information when the order's shipping-method is 'storepickup'.</li>
            <li>BUGFIX: Correct new order-totals can no longer be added.</li>
            <li>CHANGE: Sort orders-status values by their <code>sort_order</code>, if the field exists in the database.</li>
            <li>CHANGE: Additional notifications provided to enable customization.</li>
            <li>CHANGE: Enable a store to override EO's use of numeric fields; see <a href="https://github.com/lat9/edit_orders/issues/136" target="_blank">this</a> GitHub issue for details.</li>
            <li>BUGFIX: Provide mock-cart 'total' and 'weight' values (interoperation).</li>
            <li>BUGFIX: Correct MySQL error if a store doesn't use <code>ot_shipping</code.</li>
            <li>BUGFIX: Document change required if a store uses a cron-job for the currency-cron.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/classes/mock_cart.php</li>
              <li>/YOUR_ADMIN/includes/classes/observers/EditOrdersAdminObserver.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.4.2, 2019-07-27 (lat9)<ul>
            <li>BUGFIX: Correctly enable non-integer tax rates for the gross/net handling for stores that display prices with tax.</li>
            <li>BUGFIX: Properly center the top order-navigation links and form.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.4.1, 2019-07-09 (lat9)<ul>
            <li>BUGFIX: Correctly manage products' quantities on order's updates.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.4.0, 2019-06-01 (lat9)<ul>
            <li>CHANGE: Additional notifications for external tax-handlers.</li>
            <li>BUGFIX: Remove doubly-defined constant.</li>
            <li>BUGFIX: Correct various PHP warnings.</li>
            <li>BUGFIX: Remove multiple trailing colons (':') from the shipping-method's title on an order-update.</li>
            <li>BUGFIX: Correct 'ot_misc_cost' taxable issues.</li>
            <li>CHANGE: Update array-formatting for eo-logs.</li>
            <li>BUGFIX: Correct rounding errors.</li>
            <li>CHANGE: Provide net/gross jQuery calculations for stores that display prices with tax.</li>
            <li>CHANGE: Provide styled buttons/icons for Zen Cart 1.5.6 and later.</li>
            <li>CHANGE: Enable integration with <a href="https://vinosdefrutastropicales.com/index.php?main_page=product_info&cPath=2_7&products_id=49" target="_blank">Attribute Image Swapper</a>.</li>
            <li>CHANGE: All <em>EO</em> cart-related actions are now provided by its &quot;mock&quot; cart class.</li>
            <li>CHANGE: Enable automatic pricing calculations, either with or without specials' pricing.</li>
            <li>BUGFIX: Apply existing coupon when adding a product to the order.</li>
            <li>BUGFIX: Record a coupon's &quot;coupon_code&quot; in the order when a coupon is added via <em>EO</em>'s processing.</li>
            <li>CHANGE: Additional notification issued for customized, display-only order totals.</li>
            <li>CHANGE: Add configuration settings to control the display of the status-history and comments section.</li>
            <li>CHANGE: Additional notification issued to enable additional javascript to be included.</li>
            <li>CHANGE: Additional notification issued to enable additional columns in an order's status-history table.</li>
            <li>CHANGE: Display an <b>Updated By</b> column in the status-history table, if that field is present in the store's database.</li>
            <li>BUGFIX: <code>ot_onetime_discount</code> causes PHP warning on initial display in admin's <b><i>Modules->Order Total</i></b>.</li>
            <li>The following files were changed:<ol>
              <li>/includes/languages/english/modules/order_total/ot_misc_cost.php</li>
              <li>/includes/modules/order_total/ot_misc_cost.php</li>
              <li>/includes/modules/order_total/ot_onetime_discount.php</li>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/edit_orders.css</li>
              <li>/YOUR_ADMIN/includes/auto_loaders/config.eo.php</li>
              <li>/YOUR_ADMIN/includes/classes/attributes.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/classes/mock_cart.php</li>
              <li>/YOUR_ADMIN/includes/classes/observers/EditOrdersAdminObserver.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/edit_orders.php</li>
            </ol></li>
            <li>The following changes are made to the database:<ol>
              <li>Adds the column <code>shipping_tax_rate</code> to the <code>orders</code> table.</li>
              <li>Removes the configuration setting 'Use a mock shopping cart?'.</li>
              <li>Updates the <em>Product Price Calculations</em> configuration settings, enabling an additional calculation method.</li>
              <li>Adds the <em>Status-history Display Order</em> and <em>Status-update: Customer Notification Default</em> configuration settings.</li>
            </ol></li>
          </ul></li>
          <li>v4.3.5, 2018-10-31 (lat9)<ul>
            <li>BUGFIX: New configuration settings not included on initial install.</li>
            <li>BUGFIX/CHANGE: Ensure that order totals' <em>sort_order</em> is a numeric value.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.3.4, 2018-04-08 (lat9)<ul>
            <li>BUGFIX/CHANGE: Re-align /YOUR_ADMIN/orders.php notifiers with v1.5.6 and later.</li>
            <li>BUGFIX: Change to shipping-method doesn't &quot;stick&quot;.</li>
            <li>CHANGE: Additional notifiers for stock-decrement and order-total processing.</li>
            <li>BUGFIX: Correct interaction with various order-total plugins, especially with tax calculations.</li>
            <li>BUGFIX: Correct PHP 7.1+ warning about &quot;A non-numeric value&quot;.</li>
            <li>CHANGE: Modify <em>ot_onetime_discount</em> to enable the entry of both additions to and deductions from an order's total.  You'll need to remove and re-install the order-total module prior to use.</li>
            <li>BUGFIX/CHANGE: Entered product prices no longer honored after v4.3.3 update; additional configuration settings added.</li>
            <li>The following files were changed:<ol>
              <li>/includes/modules/order_total/ot_onetime_discount.php</li>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li><span class="corefile">/YOUR_ADMIN/orders.php</span> <span class="smaller">Single line (#928) changed, modifying notification id from <code class="no-pad">NOTIFY_ADMIN_ORDERS_LISTING_ROW</code> to <code class="no-pad">NOTIFY_ADMIN_ORDERS_SHOW_ORDER_DIFFERENCE</code>.</span></li>
              <li>/YOUR_ADMIN/includes/classes/observers/EditOrdersAdminObserver.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/edit_orders.php</li>
            </ol></li>
          </ul></li>
          <li>v4.3.3, 2018-03-09 (lat9)<ul>
            <li>BUGFIX: Product price not updated when attributes are changed.</li>
            <li>BUGFIX: Incorporate zc156+ notification.</li>
            <li>CHANGE: Display warning if <em>Configuration-&gt;Stock-&gt;Allow Checkout</em> is set to 'false' and insufficient stock is available.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/includes/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/observers/EditOrdersAdminObserver.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/edit_orders.php</li>
            </ol></li>
          </ul></li>
          <li>v4.3.2, 2018-03-07 (lat9)<ul>
            <li>BUGFIX: Attributes are lost from products when an order is updated.</li>
            <li>BUGFIX: Load admin extra functions only for <code class="no-pad">edit_orders</code> use; corrects unwanted interaction with <em>Admin New Order</em>.</li>
            <li>CHANGE: Log-file formatting updates.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/includes/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.3.1, 2018-01-16 (lat9)<ul>
            <li>BUGFIX: Correct shipping-tax calculations when shipping is the only taxed portion of the order.</li>
            <li>BUGFIX: Correct shipping-tax calculations when a store &quot;Displays prices with tax&quot;.</li>
            <li>BUGFIX: Correct unwanted multiple messages on initial plugin installation.</li>
            <li>BUGFIX: Allow &quot;special characters&quot; in updated address fields.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/extra_datafiles/eo_sanitization.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.3.0, 2017-10-01 (lat9)<ul>
            <li>BUGFIX: Include &quot;products_ordered&quot; in columns retrieved from the &quot;products&quot; table.</li>
            <li>CHANGE: Add notifiers to enable additional address fields to be inserted.</li>
            <li>BUGFIX: Use &quot;correct&quot; variable in the mock cart's <code>get_products</code> function.</li>
            <li>BUGFIX: Correct PHP &quot;notify&quot; logs for missing/undefined variables.</li>
            <li>BUGFIX: Correct PHP &quot;notify&quot; logs when an order-total doesn't include a TAX_CLASS.</li>
            <li>BUGFIX: Missing notifiers were not being reported.</li>
            <li>BUGFIX: Order-total recalculation incorrect when some order-totals (e.g. Group Pricing) are included.</li>
            <li>The following files were changed:<ol>
              <li>/includes/classes/vinos/common/NotifierCheck.php</li>
              <li>/YOUR_ADMIN/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/classes/editOrders.php</li>
              <li>/YOUR_ADMIN/includes/classes/mock_cart.php</li>
              <li>/YOUR_ADMIN/includes/functions/extra_functions/edit_orders_functions.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.2.3, 2017-04-23 (lat9)<ul>
            <li>BUGFIX: Correct attribute-sorting issue.</li>
            <li>The following files were changed:<ol>
              <li>/YOUR_ADMIN/includes/classes/attributes.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.2.2, 2017-03-20 (lat9)<ul>
            <li>BUGFIX: Correct PHP parse error introduced in v4.2.1.</li>
            <li>The following files were changed:<ol>
              <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.2.1, 2017-03-19 (lat9)<ul>
            <li>BUGFIX: Incorrect variable used in Packing Slip and Invoice links on an order's details page.</li>
            <li>The following files were changed:<ol>
              <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
            </ol></li>
          </ul></li>
          <li>v4.2.0, 2017-03-01 (lat9)<ul>
            <li>CHANGE: Require Zen Cart 1.5.5a or later.</li>
            <li>CHANGE: Remove integration with <em>Ty Package Tracker</em> from <code class="no-pad">\YOUR_ADMIN\orders.php</code>.</li>
            <li>CHANGE: Restructure plugin installation.</li>
            <li>The following files were changed, <span class="added">added</span> or <span class="removed">removed</span>:<ol>
              <li><span class="added">/includes/auto_loaders/init_vinos_autoload.php</span></li>
              <li><span class="removed">/includes/classes/order_total.php</span><sup>1</sup></li>
              <li><span class="removed">/includes/classes/shipping.php</span><sup>1</sup></li>
              <li><span class="added">/includes/classes/VinosAutoload.php</span></li>
              <li><span class="added">/includes/classes/vinos/common/NotifierCheck.php</span></li>
              <li><span class="added">/includes/init_includes/init_vinos_autoload.php</span></li>
              <li>/YOUR_ADMIN/orders.php</li>
              <li><span class="removed">/YOUR_ADMIN/images/icon_edit.gif</span><sup>1</sup></li>
              <li>/YOUR_ADMIN/includes/auto_loaders/config.eo.php</li>
              <li><span class="removed">/YOUR_ADMIN/includes/auto_loaders/config.zc154_compatibility.php</span></li>
              <li><span class="removed">/YOUR_ADMIN/includes/classes/eo_plugin.php</span></li>
              <li><span class="removed">/YOUR_ADMIN/includes/classes/plugin.php</span><sup>2</sup></li>
              <li><span class="added">/YOUR_ADMIN/includes/classes/observers/EditOrdersAdminObserver.php</span></li>
              <li>/YOUR_ADMIN/includes/extra_configures/edit_orders.php</li>
              <li>/YOUR_ADMIN/includes/extra_datafiles/edit_orders_defines.php</li>
              <li>/YOUR_ADMIN/includes/init_includes/init_eo_config.php</li>
              <li><span class="added">/YOUR_ADMIN/includes/init_includes/init_vinos_common_admin.php</span></li>
              <li><span class="removed">/YOUR_ADMIN/includes/init_includes/init_zc154_compatibility.php</span></li>
              <li><span class="removed">/YOUR_ADMIN/includes/languages/english/orders.php</span><sup>1</sup></li>
              <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/edit_orders.php</li>
              <li><span class="removed">/YOUR_ADMIN/includes/languages/english/plugins/eo.php</span></li>
              <li><span class="removed">/YOUR_ADMIN/includes/languages/english/plugins/plugin.php</span><sup>2</sup></li>
            </ol><sup>1</sup>Identifies that the file was removed from this plugin's distribution <strong>only</strong>; use the version associated with your Zen Cart distribution.<br /><sup>2</sup>Other plugins, notably <em>Ultimate SEO URLs</em>, that make use of a module using the same name but different contents; make sure that the module isn't required by others prior to removing.</li>
          </ul></li>
          <li>v4.1.7, 2016-10-24 (lat9)<ul>
            <li>BUGFIX: Modify <em>order.php</em> to include the &quot;value&quot; for each order-total in the order.</li>
            <li>BUGFIX: Correct interaction with &quot;ot_cod_fee&quot;.</li>
            <li>BUGFIX: Correctly handle taxable order-totals.</li>
            <li>BUGFIX: Correct currency-related rounding issues.</li>
          </ul></li>
          <li>v4.1.6, 2016-08-06 (lat9)<ul>
            <li>CHANGE: Convert tabs to 4 spaces in some of the files.</li>
            <li>CHANGE: Re-factor debug-output; the EO debug output file is now generated on an order-by-order basis.</li>
            <li>BUGFIX: Don't display the &quot;Missing shipping information&quot; message is the order contains only virtual products.</li>
            <li>BUGFIX: Tax not added if the order didn't start with taxes and/or if a product is added to the order.</li>
            <li>BUGFIX: Missing echo in admin's orders.php merge; the bottom &quot;Edit Order&quot; button was rendered useless.</li>
          </ul></li>
          <li>v4.1.5, 2016-05-19 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a> and lat9)<ul>
            <li>BUGFIX: Correct "Unknown column 'p.products_quantity' in 'field list".</li>
            <li>BUGFIX: Corrections for coupons with category / product restrictions.</li>
            <li>CHANGE: Account for order-total modules that have been removed.</li>
            <li>CHANGE: Mimic storefront sort-order for attributes' display.</li>
            <li>BUGFIX: Correct incorrect tax-calculations after editing an order.</li>
            <li>BUGFIX: Correct multi-line comments display with \r\n.</li>
            <li>CHANGE: Include a &quot;Miscellaneous Cost&quot; order-total that's <em>Edit Orders</em> specific.</li>
            <li>BUGFIX: Correct interaction with stores that use the &quot;Split Tax Lines&quot; configuration.</li>
            <li>CHANGE: Remove reliance on the built-in currency initialization scripts.</li>
            <li>CHANGE: Add support for the "admin sanitization" introduced in Zen Cart 1.5.5.</li>
          </ul></li>
          <li>v4.1.4, 2015-01-27 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a>)<ul>
             <li>Updated the installation, upgrade, and removal process to use &quot;Plugin Manager&quot; 0.5rc2 core files.</li>
          </ul></li>
          <li>v4.1.3, 2014-01-06 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a> and lat9)<ul>
            <li>Updated the installation, upgrade, and removal process to use a newer version of &quot;Plugin Manager&quot; core files.</li>
            <li>Cleaned up the english language files. Obsolete entries were removed and some new entries added.</li>
            <li>Removed the optional language files as they no longer contain all the neccessary defined constants.</li>
            <li>Added various changes to support Zen Cart 1.5.2 (including copying additional functions from the catalog side).</li>
            <li>Added a mock &quot;shopping cart&quot; class which reads product data from the current order. This should help with Order Total modules which only look at the shopping cart ($_SESSION['cart']) and ignore the order ($order).</li>
            <li>Added optional &quot;debug&quot; file logging. This should only be used for problem solving as it may adversely affect performance.</li>
            <li>When a product is loaded from the database, additional fields are populated to match Zen Cart 1.5.2 handling.</li>
            <li>Added handling for updating an order containing a deleted product. It is strongly recommended to not delete products until after all editing of orders containing the product are completed.<ul>
              <li>The tax description is neccessary and will be generated using TEXT_UNKNOWN_TAX_RATE.</li>
              <li>Tax class details will not be present or generated.</li>
              <li>Attribute information may not fully populate or may be lost.</li>
            </ul></li>
            <li>One can now place the coupon code by itself in the &quot;title&quot; for &quot;ot_coupon&quot;</li>
            <li>Included an optional &quot;Onetime Discount&quot; order total module.</li>
            <li>Changes to the way order status / order history is handled:<ul>
              <li>If the status is changed it will be recorded (with or without comment).</li>
              <li>The comment (if any) will be added to the order history (previously only added if the status changed).</li>
              <li>The tracking number(s) (if any) will be added to the order history.</li>
              <li>If the option to notify the customer is selected the customer will be sent an email.</li>
              <li>When the option to append comments is selected the following will be included in the email:<ul>
                <li>The comment (if any) along with EMAIL_TEXT_COMMENTS_UPDATE.</li>
                <li>The tracking number(s) along with EMAIL_TEXT_COMMENTS_TRACKING_UPDATE.</li>
              </ul></li>
            </ul></li>
            <li>Added the option to &quot;strip&quot; HTML and PHP tags from the list of enabled shipping modules.</li>
            <li>Added warning messages if ot_total or ot_subtotal are disabled.</li>
            <li>Added a check (and repair) for missing core configuration directives related to attributes.</li>
            <li>Moved initial checks and warnings performed by the edit orders admin page to a function.</li>
            <li>Fixed a bug which did not allow products to use &quot;partial&quot; quantities (fractions).</li>
            <li>Fixed a bug causing an obsolete file to not be removed upon install / upgrade.</li>
            <li>File Upload attributes will now be passed along when updating the product. Removing a File Upload attribute is not supported.</li>
            <li>Updated the code removing products from an order. These now use the Zen Cart "stock" configuration options to increment / decrement stock quantities.</li>
          </ul></li>
          <li>v4.1.2, 2017-07-28 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a>)<ul>
            <li>Changed the "local_sales_tax" line to no longer be editable as the value is automatically generated based upon the order.</li>
            <li>When adding a coupon code, if the code is not valid the order total will not be added (and if invalid and present will be removed).</li>
            <li>Added a check when adding checkboxes to avoid generating a warning when no checkbox in the option group was selected.</li>
            <li>When removing a product from the order, other items in the order are now correctly processed and updated (if changed).</li>
            <li>Fixed a bug caused when adjusting the quantity of an item in an order (introducted in Edit Orders 4.1.1).</li>
            <li>Fixed a bug when adding a product to an order w/ a text attribute containing a double quote (&quot;).</li>
            <li>Functions handling form inputs now utilize zen_db_output (added in Zen Cart 1.5.1) or fall back to htmlspecialchars.</li>
            <li>One Time Charges for a product are now reflected in the Total Price column for the product (were already added to the subtotal).</li>
          </ul></li>
          <li>v4.1.1, 2013-07-13 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a>)<ul>
            <li>Updated tax calculations to Zen Cart 1.5.1 based code.</li>
            <li>Fixed a tax calculation bug when all products were removed from an order.</li>
            <li>Fixed the code handling product attribute updates to be more accurate.</li>
            <li>Fixed a bug which caused the subtotal to always be zero.</li>
            <li>Fixed a bug with the automatic calculation of onetime charges based on attributes (when adding a product).</li>
            <li>When the order is loaded address information more closely matches the information found during checkout.
              <ul>
                <li>If we can determine the country by id, name, or iso code:
                <ul>
                  <li>The &quot;country&quot; field will contain the Zen Cart country array.</li>
                  <li>The &quot;zone_id&quot; field will be populated based upon country and state.</li>
                </ul>
                <li>Otherwise, the &quot;country field will contain the country name. This allows one to see / update the country (to one found in the Zen Cart country database).</li>
              </ul>
            </li>
            <li>The country listed for addresses will now be displayed as a dropdown if the country exists in the Zen Cart database. Otherwise it will be displayed as text.</li>
            <li>Copied the catalog tax function &quot;zen_get_tax_rate_from_desc()&quot; from Zen Cart 1.5.1 to support additional order total modules.</li>
            <li>Copied the catalog function &quot;zen_get_country_list&quot; from Zen Cart 1.5.1 to support country dropdowns in the addresses.</li>
            <li>Zen Cart functions copied from the &quot;catalog&quot; side are only included if not already present.</li>
            <li>Disabled manual editing of the &quot;Low Order Fee&quot; order total module. This is handled automatically.</li>
            <li>If no remaining order total modules are available to add to an order, the order total entry fields will not be shown.</li>
            <li>Ty Tracker will add a tracking number to the sent email when:
              <ol>
                <li>The order is updated and notify customer is selected.</li>
                <li>Ty Tracker is installed and enabled.</li>
                <li>A Tracking Code is present for the "shipper".</li>
                <li>The "shipper" is enabled in Ty Tracker.</li>
              </ol>
            </li>
            <li>Included the &quot;plugin&quot; class and associated files.
              <ul>
                <li>The class and files are not part of &quot;Edit Orders&quot;.</li>
                <li>Provides for simplification of the installation / upgrade process.</li>
                <li>Provides for simplification of the removal process.</li>
                <li>Does some extra checks against Zen Cart's configure.php files.</li>
              </ul>
            </li>
            <li>Created new install, upgrade, and removal processes.
              <ul>
                <li>Makes use of the &quot;plugin&quot; class and associated files</li>
                <li>On upgrade attempts to make needed modifications to any existing orders.php from &quot;Super Orders&quot; or &quot;Admin New Order&quot;</li>
              </ul>
            </li>
            <li>Cleaned up comments in &quot;orders.php&quot; to be more friendly.</li>
            <li>Links in &quot;orders.php&quot; to edit will no longer appear if Edit Orders is not installed.</li>
            <li>Moved 'BOX_CONFIGURATION_EDIT_ORDERS' into a language file (used to display the configuration menu item).</li>
            <li>Updated readme (collaboration of Zen Cart forum members).</li>
          </ul></li>
          <li>v4.1, 2017-04-12 (<a href="http://www.zen-cart.com/member.php?115838" target="_blank">A. Ballanger</a> and <a href="http://overthehillweb.com" target="_blank">C. Jones</a>)<ul>
            <li>Reduced duplicate code for Ty Package Tracker support.</li>
            <li>Complete rewrite of the code handling products and attributes.
              <ul>
                <li>Utilizes Zen Cart functions and classes where possible.</li>
                <li>Added many new functions to provide better support products and attributes.</li>
                <li>Added a class used to abstract access to product attributes.</li>
                <li>Used when displaying, updating, and adding products (including attributes).</li>
              </ul>
            </li>
            <li>Added updated versions of some Zen Cart core classes to allow them to work correctly from the admin side of Zen Cart.
              <ul>
                <li><strong>admin/init_includes/init_currencies.php</strong> to load the currencies class.</li>
                <li><strong>includes/classes/order_total.php</strong> to load the correct language files.</li>
                <li><strong>includes/classes/shipping.php</strong> to load the correct language files.</li>
              </ul>
            </li>
            <li>When adding a product:
              <ul>
                <li>You can now search by product id, name, description, and model.</li>
                <li>Step 2 now shows both the product name and model.</li>
                <li>The built-in Zen Cart functions are called in a similar manner as adding a product to your shopping cart. This ensures the order totals can be automatically updated.</li>
                <li>You can disable the use of &quot;specials / sales prices&quot; still. This is not recommended.</li>
                <li>The store settings for handling attributes (including showing / hiding) are utilized.</li>
              </ul>
            </li>
            <li>When updating a product: product information is pulled from the database, then requested changes (such as name and price) are merged. This ensures the correct product information is always present in the order.</li>
            <li>Updated to utilize the order_totals class and modules
              <ul>
                <li>Order Total modules are loaded when adding or updating a product.</li>
                <li>Ensures proper calculation of subtotal and total.</li>
                <li>Tax calculation now is done automatically using the store settings (same as during a customer checkout).</li>
                <li>Order Total Lines are now added by selecting the desired module from a dropdown.</li>
                <li>The Order Total dropdown contains a list of installed order totals not already present in the order.</li>
                <li>Added support for specifying and changing the shipping module when a shipping line is used.</li>
                <li>Removed field for changing the shipping tax. This is automatically calculated by <strong>includes/modules/order_total/ot_shipping.php</strong>.
                </li>
              </ul>
            </li>
            <li>Copied (and modified for use in the admin side of Zen Cart) a handful of the catalog tax functions to <strong>admin/functions/extra_functions/edit_orders_functions.php</strong></li>
            <li>Updated the installation script to add additional failure messages and not report success if a step fails.</li>
            <li>Fixed the order status dropdown to correctly select order status. This avoids the status being accidentally changed if the status is not "Pending (1)".</li>
            <li>Moved the &quot;edit&quot; button in the order menu over so the "details" button is more likely to be clicked by someone quickly looking at an order. This should hopefully lower the number of &quot;accidentally&quot; edited orders.</li>
            <li>Added special handling to support the <code class="no-pad">ot_loworderfee</code> module.</li>
            <li>Added some "dummy" files for those upgrading from an older version.</li>
            <li>Minor updates to the readme for version 4.1.</li>
          </ul></li>
          <li>Older, pre-v4.1 changes can be viewed <a href="older_versions_change_list.html" target="_blank">here</a>.</li>
        </ul>
      </div>
      <!-- end history section -->
      
    </div>
  </div>

  <script type="text/javascript">
    $( '#outer-container, #inner-container1, #inner-container2, #inner-container3, #inner-container4' ).easytabs();
    
    $( '.side-link' ).click( function() {
        window.location.hash = $(this).attr( 'href' );
        location.reload();
    });
  </script>
</body>
</html>